% !Author = kivel
% !Date = 2021-12-08
% !TEX spellcheck = us-US

% Preamble
\documentclass[12pt, a4paper, twoside]{scrartcl}
\usepackage[utf8]{inputenc}

% Packages
\usepackage{amsmath}
\usepackage{color, colortbl}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage[dvipsnames]{xcolor}
\usepackage{listings}
%\usepackage{tocstyle}
% float placement
\usepackage{float}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{fontawesome5}


%% yaml syntax highlighting --> https://www.latex4technics.com/?note=187E
{% include 'axisreport_yamlSyntax.tex' %}

% ==============================================================================
% definitions
% ==============================================================================
{# define _egu_#}
{%-set egu -%}
{{epics.unit}}
{%-endset-%}

{%-set vu -%}
$\mathrm{ {{epics.unit}} }\cdot\mathrm{ s }^{-1}$
{%-endset-%}

{%-set au -%}
$\mathrm{ {{epics.unit}} }\cdot\mathrm{ s }^{-2}$
{%-endset-%}

{%-set ju -%}
$\mathrm{ {{epics.unit}} }\cdot\mathrm{ s }^{-3}$
{%-endset-%}

{% include 'axisReport_definitions.tex' %}


% Document

% TODO: add PSI cover page
\title{Axis Configuration Report}

\begin{document}

\begin{titlepage}
  \maketitle
  \vfill
  \hrule
  \begin{minipage}[t]{0.5\textwidth}
    \vspace{2mm}
    \large Author: {{ meta.author|default('') }}
    {% if meta.date is defined %}
    \large Date: {{ meta.date }} \\
    {% endif %}
    \large Facility: {{ meta.facility }} \\
    \large Device: {{meta.device|default('default device')}}
    \vspace{2mm}
  \end{minipage}
  \hrule
  \vspace{2mm}
\end{titlepage}

\tableofcontents
\vfill
\pagebreak

{% include 'axisReport_axis.tex' %}

{% include 'axisReport_var.tex' %}

{% include 'axisReport_epics.tex' %}

{% include 'axisReport_trajectory.tex' %}

{% include 'axisReport_controller.tex' %}

{% include 'axisReport_drive.tex' %}

{% include 'axisReport_encoder.tex' %}

{%if monitoring is defined%}
  {% include 'axisReport_monitoring.tex'%}
{%endif%}

{% include 'axisReport_homing.tex' %}

\vfill
\pagebreak
\appendix

\section{yaml configuration file}

\lstset{numbers=left,
  inputencoding=latin1,
  basicstyle=\fontsize{8}{8}\selectfont\ttfamily,
  keywordstyle=\color{blue},
  breaklines=true,
  showtabs=false,
  showstringspaces=false
}

\lstinputlisting[language=yaml]{ {{-yamlFile}}}

\end{document}
